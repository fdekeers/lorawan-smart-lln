# Arduino

This directory contains all the code related to the Arduino sketches of our end devices.
The **devices** directory contains the end devices sketches,
and the **libraries** directory contains the Arduino libraries needed by the sketches.

## Devices
When an end device sketch is generated by the [python generation script](../generate-sketch/generate-sketch.py), it is placed in the **devices** directory.\
This directory also contains a sample sketch for a WiFi LoRa 32 end device,
as well as a The Things Node device.

To compile an Arduino sketch for the WiFi LoRa 32 board, please follow the instructions at https://heltec-automation-docs.readthedocs.io/en/latest/esp32/quick_start.html. \
To compile an Arduino sketch for a The Things Node, please follow the instructions at https://www.thethingsnetwork.org/docs/devices/node/quick-start.

## Libraries
All the needed Arduino libraries are available in this directory.\
Those libraries are the following:
- **Adafruit_BME280_Library**: connection with the BME280 sensor
- **Adafruit_BME680_Library**: connection with the BME680 sensor
- **Adafruit_Unified_Sensor**: connection with generic sensors, used by the two libraries above
- **BSEC_Software_Library**: management of the BME680 sensor, and conversion of the BME680 values into other values, namely the indoor air quality index (IAQ)
- **ESP32_LoRaWAN**: LoRaWAN network connection for the WiFi LoRa 32 board
- **EspDevice**: custom library, handling of the general behaviour of a WiFi LoRa 32 device
- **Heltec_ESP32_Dev-Boards**: generic library for the WiFi LoRa 32 board
- **MQ135**: read values from the MQ-135 gas sensor
- **Packet**: custom library, collection of data values and formatting of LoRaWAN and JSON packets
- **SoundSensor**: custom library, reading values from the KY-037 sound sensor
- **TheThingsNetwork**: connection with The Things Network, only used in the case of a The Things Node device
- **TheThingsNode**: management of a The Things Node device
- **TinyGPSPlus**: decoding of NMEA sentences from a GPS module
- **WifiLocation**: geo-location data retrieving through Wi-Fi, by using Google Geolocation API
- **WifiSender**: custom library, Wi-Fi transmissions (emergency data transmission & geo-location retrieving at start-up)
